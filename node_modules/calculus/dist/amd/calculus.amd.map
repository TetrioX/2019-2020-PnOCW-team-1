{"version":3,"sources":["calculus.js","differential-equations/ode45.js"],"sourcesContent":["import ode45 from 'differential-equations/ode45';\n\nexport { ode45 };\n","const sixth = 1/6;\n\nfunction rungeKutta(fn, x, y, h) {\n  const h2 = h * 0.5;\n  const k1 = h * fn(x, y);\n  const k2 = h * fn(x + h2, y + k1 * h2);\n  const k3 = h * fn(x + h2, y + k2 * h2);\n  const k4 = h * fn(x + h,  y + k3 * h);\n  return y + sixth * (k1 + 2 * k2 + 2 * k3 + k4);\n}\n\nfunction binarySearch(t, T) {\n  let iMin = 0;\n  let iMax = T.length - 1;\n  while (iMax - iMin > 1) {\n    const i = iMin + Math.round((iMax - iMin)/2);\n    const ti = T[i];\n    if (ti < t) {\n      iMin = i;\n    } else if (ti > t) {\n      iMax = i;\n    } else {\n      iMin = i;\n      iMax = i;\n    }\n  }\n  return [iMin, iMax];\n}\n\nfunction indexInterpolate(t, T) {\n  let [iMin, iMax] = binarySearch(t, T);\n  if (iMin === iMax) {\n    return iMin;\n  }\n  const tiMin = T[iMin];\n  const tiMax = T[iMax];\n  const interp = (t - tiMin) / (tiMax - tiMin);\n  let index = iMin + interp;\n  index = Math.min(T.length - 1, index);\n  index = Math.max(0, index);\n  return index;\n}\n\nfunction pluckTimes(t, T, Y) {\n  const y = [];\n  for (let i = 0; i < t.length; i++) {\n    const ti = t[i];\n    const j = indexInterpolate(ti, T);\n    const jMin = Math.floor(j);\n    const jMax = Math.ceil(j);\n    if (jMax === j) {\n      y.push(Y[j]);\n    } else {\n      const y1 = Y[jMin];\n      const y2 = Y[jMax];\n      const interp = j - jMin;\n      const value = y1 + (y2 - y1) * interp;\n      y.push(value);\n    }\n  }\n  return y;\n}\n\nexport { indexInterpolate, binarySearch, pluckTimes };\n\nexport default function(fn, domain, initial) {\n  const T = [];\n  const Y = [];\n  const h = 1e-3;\n  let yt = initial;\n  let t = domain[0];\n  let tMax = domain[domain.length - 1];\n  Y.push(yt);\n  T.push(t);\n  while (t < tMax) {\n    t += h;\n    yt = rungeKutta(fn, t, yt, h);\n    Y.push(yt);\n    T.push(t);\n  }\n\n  if (domain.length > 2) {\n    return [domain, pluckTimes(domain, T, Y)];\n  } else {\n    return [T, Y];\n  }\n}\n"],"names":[],"mappings":"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","sourceRoot":"/","file":"calculus.amd.js"}